<!DOCTYPE html>
<html>

<head>
  <title>wow</title>
</head>
<style>
  section {
    display: block;
    width: 400px;
    margin: 1 rem auto;
    background: azure;
  }
</style>

<body>

  <section>
      <h1>wow 2 ‚≠êÔ∏è</h1>
  <p>it works üéâ</p>
  <button id="pm">trigger  window.parent.postMessage</button>
  <p>this is a simple vanilla js app github</p>
  <p id="msg">....</p>
  </section>
  <script>
    (function() {

      const pm = document.getElementById("pm");

      const myPostMessage = () => {
        const detail = {
          type: "showNotification"
          severity: "success",
          summary: "triggered from github postMessage using window.__shellMsgApi",
          detail: window.location.origin,
        }
        window.__shellMsgApi.postExternalMessageFromChild(JSON.stringify(detail), "*")
        console.log("hello from github postmessage", JSON.stringify(detail));
      };
      
      pm.addEventListener("click", myPostMessage);
      
      
      const showMessageFromShell = txt => document.getElementById("msg").textContent = txt
      
      window.__shellMsgApi.subscribeToMessages(showMessageFromShell)
      
      

    })();
  </script>
</body>

</html>
